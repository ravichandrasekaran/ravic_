---
title: 'Riddler: Magna-Tiles Polyhedra'
author: ravic_
date: '2020-01-31'
slug: riddler-magna-tiles-polyhedra
categories: []
tags:
  - riddler
---



<p>From the <a href="https://fivethirtyeight.com/features/can-you-roll-the-perfect-bowl/">Riddler</a>, a little 3D puzzle with triangular tiles!</p>
<!--more-->
<p>From our friends at the <a href="https://fivethirtyeight.com/features/can-you-roll-the-perfect-bowl/">Riddler</a>:</p>
<blockquote>
<p>Robert’s daughter has a set of Magna-Tiles, which, as their name implies, are tiles with magnets on the edges that can be used to build various polygons and polyhedra. Some of the tiles are identical isosceles triangles with one 30 degree angle and two 75 degree angles. If you were to arrange 12 of these tiles with their 30 degree angles in the center, they would lay flat and form a regular dodecagon. If you were to put fewer (between three and 11) of those tiles together in a similar way, they would form a pyramid whose base is a regular polygon. Robert has graciously provided a <a href="https://fivethirtyeight.com/features/can-you-roll-the-perfect-bowl/">photo of the resulting pyramids when three and 11 tiles are used</a><br />
<br />
If Robert wanted to maximize the volume contained within the resulting pyramid (presumably to store as much candy for his daughter as possible), how many tiles should he use?</p>
</blockquote>
<hr />
<div id="results" class="section level2">
<h2>Results</h2>
<p>Let’s save the trig for a moment, and check out the results!</p>
<p><img src="/post/2020-01-31-riddler-magna-tiles-polyhedra_files/figure-html/plot_main_answer-1.png" width="672" /></p>
<p>Instead of assuming that it lies flat with 12 tiles, let’s try out some
other values.</p>
<p><img src="/post/2020-01-31-riddler-magna-tiles-polyhedra_files/figure-html/plot_other_variants-1.png" width="672" /></p>
<hr />
<div class="figure">
<img src="https://sites.google.com/site/therealworldtrigonometry/_/rsrc/1460486510342/home/image.gif" alt="Brace yourself - the trig is coming!" />
<p class="caption"><em>Brace yourself - the trig is coming!</em></p>
</div>
<hr />
</div>
<div id="approach" class="section level2">
<h2>Approach</h2>
<div id="the-base" class="section level4">
<h4>The base</h4>
<!-- https://stackoverflow.com/questions/255170/markdown-and-image-alignment -->
<p><img style="padding: 0 15px; float: right;" src="/post/2020-01-31-riddler-magna-tiles-polyhedra_files/SVG/02-triangles-polygon.svg" height="250" width="250">
Let’s start by looking at the base of the polyhedron.</p>
<p>The base is a regular polygon with <span class="math inline">\(n\)</span> sides. We can divide that regular
polygon into <span class="math inline">\(n\)</span> triangles by connecting the vertices to the center. (We’re
making wedges.).</p>
<p>The interior angle <span class="math inline">\(\theta\)</span> for those <span class="math inline">\(n\)</span> triangles is <span class="math inline">\(\theta = \frac{2\pi}{n}\)</span>.<br />
<br />
<br />
</p>
<p><img style="padding: 0 15px; float: right;" src="/post/2020-01-31-riddler-magna-tiles-polyhedra_files/SVG/03-perpendicular-base.svg" height="250" width="250">
And then we can divide each triangle again in half by dropping a perpendicular
from the center to the side. How long is that perpendicular, <span class="math inline">\(p\)</span>? Well, we have
basically the same equation as before, just using a different number of sides
for the regular polygon.</p>
$$
<span class="math display">\[\begin{aligned}
\tan(\tfrac{1}{2}\theta) &amp; = (\tfrac{1}{2}a) / p \\
p &amp; = (\tfrac{1}{2}a)  \cot (\tfrac{1}{2}\theta) \\
p &amp; = (\tfrac{1}{2}a) \cot (\frac{\pi}{n})

\end{aligned}\]</span>
<p>$$</p>
</div>
<div id="the-tile" class="section level4">
<h4>The tile</h4>
<p><img style="padding: 0 15px; float: right;" src="/post/2020-01-31-riddler-magna-tiles-polyhedra_files/SVG/04-dodecahedron.svg" height="250" width="250">
Now, let’s look at the tiles that form the pyramid’s walls. For a moment,
let’s imagine we had all the tiles and laid it out flat. Then the work we
just did for the base can tell us the height of each tile, <span class="math inline">\(h_t\)</span>!</p>
<p>We’re using <span class="math inline">\(n\)</span> to reference how many tiles we choose to use. So we’ll use
<span class="math inline">\(f\)</span> for the number of tiles that allows us to lay the shape out flat. (In
our setup, <span class="math inline">\(f = 12\)</span>.)</p>
<p><span class="math display">\[
\begin{aligned}
h_t &amp; = (\tfrac{1}{2}a) \cot (\frac{\pi}{f})
\end{aligned}
\]</span></p>
</div>
<div id="the-wedge" class="section level4">
<h4>The wedge</h4>
<p>With this perpendicular distance <span class="math inline">\(p\)</span>, we can get the base area of a single
wedge.
<span class="math display">\[
\begin{aligned}
A_w &amp; = \tfrac{1}{2} \cdot p \cdot a \\
&amp; = \tfrac{1}{2} \cdot (\tfrac{1}{2}a) \cot (\frac{\pi}{n}) \cdot a \\
&amp; = \tfrac{1}{4} a^2  \cot (\frac{\pi}{n})
\end{aligned}
\]</span></p>
<p>Finally 3-D time! Let’s find how tall these wedges are! With the
perpendicular distance along the base <span class="math inline">\(p\)</span>, and the tile height
<span class="math inline">\(h_t\)</span> we obtained earlier, we can express the wedge height <span class="math inline">\(h_w\)</span>:</p>
<p><span class="math display">\[
\begin{aligned}
h_t^2 &amp; = p^2 + h_w^2 \\
h_w^2 &amp; = h_t^2 - p^2 \\
&amp; = [ (\tfrac{1}{2}a) \cot (\frac{\pi}{f})]^2 - [(\tfrac{1}{2}a) \cot (\frac{\pi}{n})]^2 \\
h_w &amp; = \sqrt{[ (\tfrac{1}{2}a) \cot (\frac{\pi}{f})]^2 - [(\tfrac{1}{2}a) \cot (\frac{\pi}{n})]^2} \\
&amp; = (\tfrac{1}{2}a) \sqrt{ \cot^2 (\frac{\pi}{f}) -  \cot^2 (\frac{\pi}{n})} \\
\end{aligned}
\]</span></p>
</div>
<div id="the-volume" class="section level4">
<h4>The volume</h4>
<p>The volume of a single wedge <span class="math inline">\(V_w\)</span> as a function of <span class="math inline">\(n\)</span> is given by:
<span class="math display">\[
\begin{aligned}
V_w &amp; = \tfrac{1}{3} \cdot A_w \cdot h_w \\
&amp; = \tfrac{1}{3} \cdot [\tfrac{1}{4} a^2  \cot (\frac{\pi}{n})] \cdot [(\tfrac{1}{2}a) \sqrt{ \cot^2 (\frac{\pi}{f}) -  \cot^2 (\frac{\pi}{n})}] \\
&amp; = \frac{1}{24} \cdot a^3 \cdot \cot(\frac{\pi}{n}) \sqrt{ \cot^2 (\frac{\pi}{f}) -  \cot^2 (\frac{\pi}{n})}
\end{aligned}
\]</span></p>
<p>And let’s not forget that we’re trying to get the total volume, <span class="math inline">\(V\)</span>:
<span class="math display">\[
\begin{aligned}
V &amp; = n \cdot V_w \\
&amp; = n \cdot [\frac{1}{24} \cdot a^3 \cdot \cot(\frac{\pi}{n}) \sqrt{ \cot^2 (\frac{\pi}{f}) -  \cot^2 (\frac{\pi}{n})}]
\end{aligned}
\]</span></p>
<p>Trig identifies are failing me, and the desire to differentiate this nastiness
is pretty low. So, let’s leave this here.</p>
<hr />
</div>
</div>
<div id="code" class="section level2">
<h2>Code</h2>
<p><em>Full code available as a RMarkdown file on <a href="https://github.com/ravichandrasekaran/ravic_/content/post/2020-01-31-riddler-magna-tiles-polyhedra.Rmd">Github</a></em></p>
<pre class="r"><code>df &lt;- tibble(n_flat = c(5:12, 25, 100), side = 1) %&gt;%
  mutate(n = map(n_flat, ~seq(3, .x))) %&gt;%
  unnest(c(n))

summ &lt;- df %&gt;%
  mutate(
    tile_height = (side / 2 ) / tan(pi / n_flat),
    base_center_side_dist = (side / 2) / tan(pi / n),
    base_wedge_area = (1/2) * base_center_side_dist * side,
    wedge_height = sqrt(tile_height ^2 - base_center_side_dist ^ 2),
    wedge_volume = (1/3) * base_wedge_area * wedge_height,
    total_volume = n * wedge_volume) </code></pre>
<pre class="r"><code># Summary for 12-tile 
options(digits = 3)
summ %&gt;%
  filter(n_flat == 12) %&gt;%
  select(n, h_t = tile_height, base_perp = base_center_side_dist, 
         base_wedge_area, wedge_height, wedge_volume,
         total_volume) </code></pre>
<pre><code>## # A tibble: 10 x 7
##        n   h_t base_perp base_wedge_area wedge_height wedge_volume total_volume
##    &lt;int&gt; &lt;dbl&gt;     &lt;dbl&gt;           &lt;dbl&gt;        &lt;dbl&gt;        &lt;dbl&gt;        &lt;dbl&gt;
##  1     3  1.87     0.289           0.144        1.84        0.0887        0.266
##  2     4  1.87     0.5             0.25         1.80        0.150         0.599
##  3     5  1.87     0.688           0.344        1.73        0.199         0.995
##  4     6  1.87     0.866           0.433        1.65        0.239         1.43 
##  5     7  1.87     1.04            0.519        1.55        0.268         1.88 
##  6     8  1.87     1.21            0.604        1.42        0.286         2.29 
##  7     9  1.87     1.37            0.687        1.26        0.289         2.60 
##  8    10  1.87     1.54            0.769        1.06        0.271         2.71 
##  9    11  1.87     1.70            0.851        0.763       0.217         2.38 
## 10    12  1.87     1.87            0.933        0           0             0</code></pre>
<pre class="r"><code>summ %&gt;%
  filter(n_flat == 12) %&gt;%
  ggplot(aes(n, total_volume)) +
  geom_point() +
  theme_light() +
  labs(
    title = &quot;Polyhedra volume for n-sided regular polygon base&quot;,
    subtitle = &quot;Assumes 12 tiles lay flat, side length = 1&quot;,
    x = &quot;n&quot;, y = bquote(&quot;Volume&quot; ~ (units^3))) +
    gghighlight(total_volume == max(total_volume), label_key = n,
                unhighlighted_params = list(colour = &quot;grey60&quot;)) +
  scale_x_continuous(breaks = seq(0, 12, 2))</code></pre>
</div>
