---
title: 'Tidy Tuesday: Hotel booking data'
author: ravic_
date: '2020-02-11'
slug: tidy-tuesday-hotel-booking-data
categories: []
draft: true
tags:
  - tidy-tuesday
---



<p>Hotel data!
<!--more--></p>
<p><a href="https://github.com/rfordatascience/tidytuesday/blob/master/data/2020/2020-02-11/readme.md" class="uri">https://github.com/rfordatascience/tidytuesday/blob/master/data/2020/2020-02-11/readme.md</a></p>
<pre><code>## 
## Attaching package: &#39;janitor&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:stats&#39;:
## 
##     chisq.test, fisher.test</code></pre>
<pre><code>## 
## Attaching package: &#39;glue&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:dplyr&#39;:
## 
##     collapse</code></pre>
<pre><code>## Parsed with column specification:
## cols(
##   .default = col_double(),
##   hotel = col_character(),
##   arrival_date_month = col_character(),
##   meal = col_character(),
##   country = col_character(),
##   market_segment = col_character(),
##   distribution_channel = col_character(),
##   reserved_room_type = col_character(),
##   assigned_room_type = col_character(),
##   deposit_type = col_character(),
##   agent = col_character(),
##   company = col_character(),
##   customer_type = col_character(),
##   reservation_status = col_character(),
##   reservation_status_date = col_date(format = &quot;&quot;)
## )</code></pre>
<pre><code>## See spec(...) for full column specifications.</code></pre>
<pre><code>## 
## Attaching package: &#39;lubridate&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:base&#39;:
## 
##     date</code></pre>
<table>
<caption><span id="tab:skim-data">Table 1: </span>Data summary</caption>
<tbody>
<tr class="odd">
<td align="left">Name</td>
<td align="left">df</td>
</tr>
<tr class="even">
<td align="left">Number of rows</td>
<td align="left">119390</td>
</tr>
<tr class="odd">
<td align="left">Number of columns</td>
<td align="left">29</td>
</tr>
<tr class="even">
<td align="left">_______________________</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">Column type frequency:</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">character</td>
<td align="left">2</td>
</tr>
<tr class="odd">
<td align="left">Date</td>
<td align="left">2</td>
</tr>
<tr class="even">
<td align="left">factor</td>
<td align="left">10</td>
</tr>
<tr class="odd">
<td align="left">logical</td>
<td align="left">2</td>
</tr>
<tr class="even">
<td align="left">numeric</td>
<td align="left">13</td>
</tr>
<tr class="odd">
<td align="left">________________________</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">Group variables</td>
<td align="left">None</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: character</strong></p>
<table>
<thead>
<tr class="header">
<th align="left">skim_variable</th>
<th align="right">n_missing</th>
<th align="right">complete_rate</th>
<th align="right">min</th>
<th align="right">max</th>
<th align="right">empty</th>
<th align="right">n_unique</th>
<th align="right">whitespace</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">agent</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">4</td>
<td align="right">0</td>
<td align="right">334</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">company</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">4</td>
<td align="right">0</td>
<td align="right">353</td>
<td align="right">0</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: Date</strong></p>
<table>
<thead>
<tr class="header">
<th align="left">skim_variable</th>
<th align="right">n_missing</th>
<th align="right">complete_rate</th>
<th align="left">min</th>
<th align="left">max</th>
<th align="left">median</th>
<th align="right">n_unique</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">reservation_status_date</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="left">2014-10-17</td>
<td align="left">2017-09-14</td>
<td align="left">2016-08-07</td>
<td align="right">926</td>
</tr>
<tr class="even">
<td align="left">arrival_date</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="left">2015-07-01</td>
<td align="left">2017-08-31</td>
<td align="left">2016-09-06</td>
<td align="right">793</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: factor</strong></p>
<table>
<thead>
<tr class="header">
<th align="left">skim_variable</th>
<th align="right">n_missing</th>
<th align="right">complete_rate</th>
<th align="left">ordered</th>
<th align="right">n_unique</th>
<th align="left">top_counts</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">hotel</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="left">FALSE</td>
<td align="right">2</td>
<td align="left">Cit: 79330, Res: 40060</td>
</tr>
<tr class="even">
<td align="left">meal</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="left">FALSE</td>
<td align="right">5</td>
<td align="left">BB: 92310, HB: 14463, SC: 10650, Und: 1169</td>
</tr>
<tr class="odd">
<td align="left">country</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="left">FALSE</td>
<td align="right">178</td>
<td align="left">PRT: 48590, GBR: 12129, FRA: 10415, ESP: 8568</td>
</tr>
<tr class="even">
<td align="left">market_segment</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="left">FALSE</td>
<td align="right">8</td>
<td align="left">Onl: 56477, Off: 24219, Gro: 19811, Dir: 12606</td>
</tr>
<tr class="odd">
<td align="left">distribution_channel</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="left">FALSE</td>
<td align="right">5</td>
<td align="left">TA/: 97870, Dir: 14645, Cor: 6677, GDS: 193</td>
</tr>
<tr class="even">
<td align="left">reserved_room_type</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="left">FALSE</td>
<td align="right">10</td>
<td align="left">A: 85994, D: 19201, E: 6535, F: 2897</td>
</tr>
<tr class="odd">
<td align="left">assigned_room_type</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="left">FALSE</td>
<td align="right">12</td>
<td align="left">A: 74053, D: 25322, E: 7806, F: 3751</td>
</tr>
<tr class="even">
<td align="left">deposit_type</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="left">FALSE</td>
<td align="right">3</td>
<td align="left">No : 104641, Non: 14587, Ref: 162</td>
</tr>
<tr class="odd">
<td align="left">customer_type</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="left">FALSE</td>
<td align="right">4</td>
<td align="left">Tra: 89613, Tra: 25124, Con: 4076, Gro: 577</td>
</tr>
<tr class="even">
<td align="left">reservation_status</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="left">FALSE</td>
<td align="right">3</td>
<td align="left">Che: 75166, Can: 43017, No-: 1207</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: logical</strong></p>
<table>
<thead>
<tr class="header">
<th align="left">skim_variable</th>
<th align="right">n_missing</th>
<th align="right">complete_rate</th>
<th align="right">mean</th>
<th align="left">count</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">is_canceled</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">0.37</td>
<td align="left">FAL: 75166, TRU: 44224</td>
</tr>
<tr class="even">
<td align="left">is_repeated_guest</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">0.03</td>
<td align="left">FAL: 115580, TRU: 3810</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: numeric</strong></p>
<table>
<thead>
<tr class="header">
<th align="left">skim_variable</th>
<th align="right">n_missing</th>
<th align="right">complete_rate</th>
<th align="right">mean</th>
<th align="right">sd</th>
<th align="right">p0</th>
<th align="right">p25</th>
<th align="right">p50</th>
<th align="right">p75</th>
<th align="right">p100</th>
<th align="left">hist</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">lead_time</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">104.01</td>
<td align="right">106.86</td>
<td align="right">0.00</td>
<td align="right">18.00</td>
<td align="right">69.00</td>
<td align="right">160</td>
<td align="right">737</td>
<td align="left">▇▂▁▁▁</td>
</tr>
<tr class="even">
<td align="left">stays_in_weekend_nights</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">0.93</td>
<td align="right">1.00</td>
<td align="right">0.00</td>
<td align="right">0.00</td>
<td align="right">1.00</td>
<td align="right">2</td>
<td align="right">19</td>
<td align="left">▇▁▁▁▁</td>
</tr>
<tr class="odd">
<td align="left">stays_in_week_nights</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">2.50</td>
<td align="right">1.91</td>
<td align="right">0.00</td>
<td align="right">1.00</td>
<td align="right">2.00</td>
<td align="right">3</td>
<td align="right">50</td>
<td align="left">▇▁▁▁▁</td>
</tr>
<tr class="even">
<td align="left">adults</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">1.86</td>
<td align="right">0.58</td>
<td align="right">0.00</td>
<td align="right">2.00</td>
<td align="right">2.00</td>
<td align="right">2</td>
<td align="right">55</td>
<td align="left">▇▁▁▁▁</td>
</tr>
<tr class="odd">
<td align="left">children</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">0.10</td>
<td align="right">0.40</td>
<td align="right">0.00</td>
<td align="right">0.00</td>
<td align="right">0.00</td>
<td align="right">0</td>
<td align="right">10</td>
<td align="left">▇▁▁▁▁</td>
</tr>
<tr class="even">
<td align="left">babies</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">0.01</td>
<td align="right">0.10</td>
<td align="right">0.00</td>
<td align="right">0.00</td>
<td align="right">0.00</td>
<td align="right">0</td>
<td align="right">10</td>
<td align="left">▇▁▁▁▁</td>
</tr>
<tr class="odd">
<td align="left">previous_cancellations</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">0.09</td>
<td align="right">0.84</td>
<td align="right">0.00</td>
<td align="right">0.00</td>
<td align="right">0.00</td>
<td align="right">0</td>
<td align="right">26</td>
<td align="left">▇▁▁▁▁</td>
</tr>
<tr class="even">
<td align="left">previous_bookings_not_canceled</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">0.14</td>
<td align="right">1.50</td>
<td align="right">0.00</td>
<td align="right">0.00</td>
<td align="right">0.00</td>
<td align="right">0</td>
<td align="right">72</td>
<td align="left">▇▁▁▁▁</td>
</tr>
<tr class="odd">
<td align="left">booking_changes</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">0.22</td>
<td align="right">0.65</td>
<td align="right">0.00</td>
<td align="right">0.00</td>
<td align="right">0.00</td>
<td align="right">0</td>
<td align="right">21</td>
<td align="left">▇▁▁▁▁</td>
</tr>
<tr class="even">
<td align="left">days_in_waiting_list</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">2.32</td>
<td align="right">17.59</td>
<td align="right">0.00</td>
<td align="right">0.00</td>
<td align="right">0.00</td>
<td align="right">0</td>
<td align="right">391</td>
<td align="left">▇▁▁▁▁</td>
</tr>
<tr class="odd">
<td align="left">adr</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">101.83</td>
<td align="right">50.54</td>
<td align="right">-6.38</td>
<td align="right">69.29</td>
<td align="right">94.58</td>
<td align="right">126</td>
<td align="right">5400</td>
<td align="left">▇▁▁▁▁</td>
</tr>
<tr class="even">
<td align="left">required_car_parking_spaces</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">0.06</td>
<td align="right">0.25</td>
<td align="right">0.00</td>
<td align="right">0.00</td>
<td align="right">0.00</td>
<td align="right">0</td>
<td align="right">8</td>
<td align="left">▇▁▁▁▁</td>
</tr>
<tr class="odd">
<td align="left">total_of_special_requests</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">0.57</td>
<td align="right">0.79</td>
<td align="right">0.00</td>
<td align="right">0.00</td>
<td align="right">0.00</td>
<td align="right">1</td>
<td align="right">5</td>
<td align="left">▇▁▁▁▁</td>
</tr>
</tbody>
</table>
<pre class="r"><code>df %&gt;%
  mutate(lead_weeks = floor(lead_time / 7)) %&gt;%
  group_by(lead_weeks) %&gt;%
  summarise(pct = sum(is_canceled) / n(),
            count = n()) %&gt;%
  ggplot(aes(lead_weeks, pct)) +
  geom_point(aes(size = count)) </code></pre>
<p><img src="/post/2020-02-11-tidy-tuesday-hotel-booking-data_files/figure-html/unnamed-chunk-1-1.png" width="672" /></p>
